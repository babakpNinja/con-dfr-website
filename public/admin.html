<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - CON-DFR CMS</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #1a5f7a;
      --primary-dark: #134b61;
      --secondary: #c41e3a;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --info: #17a2b8;
      --dark: #1a1a2e;
      --light: #f8f9fa;
      --white: #ffffff;
      --gray-100: #f8f9fa;
      --gray-200: #e9ecef;
      --gray-300: #dee2e6;
      --gray-400: #ced4da;
      --gray-500: #adb5bd;
      --gray-600: #6c757d;
      --gray-700: #495057;
      --gray-800: #343a40;
      --border-radius: 8px;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 40px rgba(0,0,0,0.15);
      --transition: 0.3s ease;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--gray-100);
      color: var(--gray-800);
      line-height: 1.6;
    }

    /* Login Screen */
    .login-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      padding: 1rem;
    }

    .login-box {
      background: var(--white);
      padding: 3rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-lg);
      width: 100%;
      max-width: 400px;
    }

    .login-box h1 {
      text-align: center;
      margin-bottom: 0.5rem;
      color: var(--primary);
    }

    .login-box p {
      text-align: center;
      color: var(--gray-600);
      margin-bottom: 2rem;
    }

    /* Admin Layout */
    .admin-container {
      display: none;
      min-height: 100vh;
    }

    .admin-container.active {
      display: flex;
    }

    /* Sidebar */
    .sidebar {
      width: 260px;
      background: var(--dark);
      color: var(--white);
      min-height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      z-index: 100;
      transition: var(--transition);
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .sidebar-header h2 {
      font-size: 1.25rem;
      margin-bottom: 0.25rem;
    }

    .sidebar-header span {
      font-size: 0.75rem;
      color: var(--gray-500);
    }

    .sidebar-nav {
      padding: 1rem 0;
    }

    .nav-section {
      padding: 0.5rem 1.5rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--gray-500);
      margin-top: 1rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 1.5rem;
      color: var(--gray-400);
      text-decoration: none;
      transition: var(--transition);
      cursor: pointer;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      font-size: 0.9rem;
    }

    .nav-item:hover, .nav-item.active {
      background: rgba(255,255,255,0.1);
      color: var(--white);
    }

    .nav-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 260px;
      padding: 2rem;
      min-height: 100vh;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--gray-300);
    }

    .content-header h1 {
      font-size: 1.75rem;
      color: var(--gray-800);
    }

    /* Cards */
    .card {
      background: var(--white);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      margin-bottom: 1.5rem;
    }

    .card-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-header h3 {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .card-body {
      padding: 1.5rem;
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--white);
      padding: 1.5rem;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .stat-icon {
      width: 50px;
      height: 50px;
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .stat-icon svg {
      width: 24px;
      height: 24px;
      color: var(--white);
    }

    .stat-icon.primary { background: var(--primary); }
    .stat-icon.success { background: var(--success); }
    .stat-icon.warning { background: var(--warning); }
    .stat-icon.info { background: var(--info); }

    .stat-info h4 {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--gray-800);
    }

    .stat-info p {
      font-size: 0.875rem;
      color: var(--gray-600);
    }

    /* Forms */
    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--gray-700);
    }

    .form-control {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--gray-300);
      border-radius: var(--border-radius);
      font-size: 0.95rem;
      transition: var(--transition);
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26, 95, 122, 0.1);
    }

    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }

    select.form-control {
      cursor: pointer;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-size: 0.9rem;
      font-weight: 500;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
    }

    .btn-primary {
      background: var(--primary);
      color: var(--white);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
    }

    .btn-success {
      background: var(--success);
      color: var(--white);
    }

    .btn-danger {
      background: var(--danger);
      color: var(--white);
    }

    .btn-secondary {
      background: var(--gray-200);
      color: var(--gray-700);
    }

    .btn-sm {
      padding: 0.5rem 1rem;
      font-size: 0.8rem;
    }

    .btn-icon {
      padding: 0.5rem;
      background: transparent;
      border: 1px solid var(--gray-300);
    }

    .btn-icon:hover {
      background: var(--gray-100);
    }

    /* Tables */
    .table-container {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--gray-200);
    }

    th {
      font-weight: 600;
      color: var(--gray-700);
      background: var(--gray-50);
    }

    tr:hover {
      background: var(--gray-50);
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid var(--gray-200);
      padding-bottom: 0;
    }

    .tab-btn {
      padding: 0.75rem 1.5rem;
      background: none;
      border: none;
      font-size: 0.9rem;
      font-weight: 500;
      color: var(--gray-600);
      cursor: pointer;
      position: relative;
      transition: var(--transition);
    }

    .tab-btn:hover {
      color: var(--primary);
    }

    .tab-btn.active {
      color: var(--primary);
    }

    .tab-btn.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: var(--primary);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Language Tabs */
    .lang-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .lang-tab {
      padding: 0.5rem 1rem;
      background: var(--gray-100);
      border: 1px solid var(--gray-300);
      border-radius: var(--border-radius);
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .lang-tab:hover {
      background: var(--gray-200);
    }

    .lang-tab.active {
      background: var(--primary);
      color: var(--white);
      border-color: var(--primary);
    }

    .lang-content {
      display: none;
    }

    .lang-content.active {
      display: block;
    }

    /* Image Preview */
    .image-preview {
      width: 100%;
      max-width: 300px;
      height: 150px;
      border: 2px dashed var(--gray-300);
      border-radius: var(--border-radius);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      margin-bottom: 1rem;
      background: var(--gray-50);
    }

    .image-preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .image-preview.empty::after {
      content: 'No image selected';
      color: var(--gray-500);
      font-size: 0.875rem;
    }

    /* Hero Image Grid */
    .hero-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1.5rem;
    }

    .hero-card {
      background: var(--white);
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      position: relative;
    }

    .hero-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }

    .hero-card-body {
      padding: 1rem;
    }

    .hero-card-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .hero-card .order-badge {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background: var(--primary);
      color: var(--white);
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .hero-card .status-badge {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      padding: 0.25rem 0.75rem;
      border-radius: 50px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .status-badge.active {
      background: var(--success);
      color: var(--white);
    }

    .status-badge.inactive {
      background: var(--gray-400);
      color: var(--white);
    }

    /* Content Editor */
    .content-item {
      background: var(--gray-50);
      border: 1px solid var(--gray-200);
      border-radius: var(--border-radius);
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .content-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }

    .content-item-key {
      font-weight: 600;
      color: var(--primary);
      font-family: monospace;
    }

    /* Settings Grid */
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    /* Color Picker */
    input[type="color"] {
      width: 50px;
      height: 40px;
      padding: 0;
      border: 1px solid var(--gray-300);
      border-radius: var(--border-radius);
      cursor: pointer;
    }

    .color-input-group {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .color-input-group input[type="text"] {
      flex: 1;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--white);
      border-radius: var(--border-radius);
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--gray-200);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h3 {
      font-size: 1.25rem;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--gray-500);
    }

    .modal-body {
      padding: 1.5rem;
    }

    .modal-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--gray-200);
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
    }

    /* Alerts */
    .alert {
      padding: 1rem 1.25rem;
      border-radius: var(--border-radius);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .alert-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert-danger {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .alert-info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }

    /* Utility */
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    .mb-0 { margin-bottom: 0; }
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mt-2 { margin-top: 1rem; }
    .d-flex { display: flex; }
    .gap-1 { gap: 0.5rem; }
    .gap-2 { gap: 1rem; }
    .justify-between { justify-content: space-between; }
    .align-center { align-items: center; }

    /* Responsive */
    @media (max-width: 992px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
      }
    }

    /* Loading Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 2px solid var(--gray-300);
      border-top-color: var(--primary);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Badge */
    .badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 600;
      border-radius: 50px;
    }

    .badge-success { background: #d4edda; color: #155724; }
    .badge-warning { background: #fff3cd; color: #856404; }
    .badge-danger { background: #f8d7da; color: #721c24; }
    .badge-info { background: #d1ecf1; color: #0c5460; }
  </style>
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
  <!-- Login Screen -->
  <div class="login-container" id="login-screen">
    <div class="login-box">
      <h1>üèõÔ∏è CON-DFR</h1>
      <p>Content Management System</p>
      <div id="login-alert"></div>
      <form id="login-form">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" class="form-control" required>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
      </form>
    </div>
  </div>

  <!-- Admin Panel -->
  <div class="admin-container" id="admin-panel">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>üèõÔ∏è CON-DFR</h2>
        <span>Content Management System</span>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">Dashboard</div>
        <button class="nav-item active" data-page="dashboard">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
          Dashboard
        </button>
        
        <div class="nav-section">Content</div>
        <button class="nav-item" data-page="hero">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          Hero Carousel
        </button>
        <button class="nav-item" data-page="content">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
          Page Content
        </button>
        <button class="nav-item" data-page="partners">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
          Partners
        </button>
        
        <div class="nav-section">Settings</div>
        <button class="nav-item" data-page="settings">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
          Site Settings
        </button>
        <button class="nav-item" data-page="navigation">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
          Navigation
        </button>
        <button class="nav-item" data-page="files">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
          Media Files
        </button>
        
        <div class="nav-section">Applications</div>
        <button class="nav-item" data-page="memberships">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg>
          Memberships
        </button>
        
        <div class="nav-section">Account</div>
        <button class="nav-item" id="logout-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
          Logout
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard Page -->
      <div class="page active" id="page-dashboard">
        <div class="content-header">
          <h1>Dashboard</h1>
          <a href="/" target="_blank" class="btn btn-secondary">View Website</a>
        </div>
        
        <div class="stats-grid" id="stats-grid">
          <!-- Stats will be loaded dynamically -->
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>Quick Actions</h3>
          </div>
          <div class="card-body">
            <div class="d-flex gap-2" style="flex-wrap: wrap;">
              <button class="btn btn-primary" onclick="showPage('hero')">Manage Hero Images</button>
              <button class="btn btn-primary" onclick="showPage('content')">Edit Page Content</button>
              <button class="btn btn-primary" onclick="showPage('partners')">Manage Partners</button>
              <button class="btn btn-primary" onclick="showPage('settings')">Site Settings</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Hero Carousel Page -->
      <div class="page" id="page-hero">
        <div class="content-header">
          <h1>Hero Carousel</h1>
          <button class="btn btn-primary" onclick="openHeroModal()">+ Add New Image</button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="hero-grid" id="hero-grid">
              <!-- Hero images will be loaded dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Page Content Page -->
      <div class="page" id="page-content">
        <div class="content-header">
          <h1>Page Content</h1>
          <button class="btn btn-primary" onclick="openContentModal()">+ Add New Section</button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div id="content-list">
              <!-- Content sections will be loaded dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Partners Page -->
      <div class="page" id="page-partners">
        <div class="content-header">
          <h1>Partners</h1>
          <button class="btn btn-primary" onclick="openPartnerModal()">+ Add Partner</button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Order</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="partners-table">
                  <!-- Partners will be loaded dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Site Settings Page -->
      <div class="page" id="page-settings">
        <div class="content-header">
          <h1>Site Settings</h1>
          <button class="btn btn-success" onclick="saveSettings()">Save All Settings</button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3>General Settings</h3>
          </div>
          <div class="card-body">
            <div class="settings-grid" id="settings-form">
              <!-- Settings will be loaded dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Page -->
      <div class="page" id="page-navigation">
        <div class="content-header">
          <h1>Navigation Menu</h1>
          <button class="btn btn-primary" onclick="openNavModal()">+ Add Menu Item</button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Label (EN)</th>
                    <th>Link</th>
                    <th>Order</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="navigation-table">
                  <!-- Navigation items will be loaded dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Media Files Page -->
      <div class="page" id="page-files">
        <div class="content-header">
          <h1>Media Files</h1>
          <button class="btn btn-primary" onclick="document.getElementById('file-upload').click()">+ Upload File</button>
          <input type="file" id="file-upload" style="display: none;" accept="image/*" onchange="uploadFile(this)">
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="hero-grid" id="files-grid">
              <!-- Files will be loaded dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Memberships Page -->
      <div class="page" id="page-memberships">
        <div class="content-header">
          <h1>Membership Applications</h1>
        </div>
        
        <div class="tabs">
          <button class="tab-btn active" data-status="all">All</button>
          <button class="tab-btn" data-status="pending">Pending</button>
          <button class="tab-btn" data-status="approved">Approved</button>
          <button class="tab-btn" data-status="rejected">Rejected</button>
        </div>
        
        <div class="card">
          <div class="card-body">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="memberships-table">
                  <!-- Memberships will be loaded dynamically -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Hero Modal -->
  <div class="modal" id="hero-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="hero-modal-title">Add Hero Image</h3>
        <button class="modal-close" onclick="closeModal('hero-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="hero-form">
          <input type="hidden" id="hero-id">
          <div class="form-group">
            <label>Image</label>
            <div class="image-preview empty" id="hero-preview"></div>
            <input type="file" id="hero-image" class="form-control" accept="image/*" onchange="previewImage(this, 'hero-preview')">
            <small style="color: var(--gray-600);">Or enter image URL:</small>
            <input type="text" id="hero-image-url" class="form-control mt-2" placeholder="https://...">
          </div>
          <div class="form-group">
            <label>Display Order</label>
            <input type="number" id="hero-order" class="form-control" value="0">
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="hero-active" checked> Active
            </label>
          </div>
          <div class="lang-tabs" id="hero-lang-tabs">
            <button type="button" class="lang-tab active" data-lang="en">English</button>
            <button type="button" class="lang-tab" data-lang="fa">ŸÅÿßÿ±ÿ≥€å</button>
            <button type="button" class="lang-tab" data-lang="tr">T√ºrk√ße</button>
            <button type="button" class="lang-tab" data-lang="az">Az…ôrbaycan</button>
            <button type="button" class="lang-tab" data-lang="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</button>
            <button type="button" class="lang-tab" data-lang="zh">‰∏≠Êñá</button>
            <button type="button" class="lang-tab" data-lang="es">Espa√±ol</button>
          </div>
          <div id="hero-lang-contents">
            <!-- Language content fields will be generated -->
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('hero-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="saveHero()">Save</button>
      </div>
    </div>
  </div>

  <!-- Content Modal -->
  <div class="modal" id="content-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="content-modal-title">Edit Content</h3>
        <button class="modal-close" onclick="closeModal('content-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="content-form">
          <div class="form-group">
            <label>Section Key</label>
            <input type="text" id="content-key" class="form-control" placeholder="e.g., about_title">
          </div>
          <div class="form-group">
            <label>Content Type</label>
            <select id="content-type" class="form-control">
              <option value="text">Short Text</option>
              <option value="textarea">Long Text</option>
              <option value="html">HTML</option>
            </select>
          </div>
          <div class="d-flex justify-between align-center mb-2">
            <div class="lang-tabs" id="content-lang-tabs">
              <button type="button" class="lang-tab active" data-lang="en">EN</button>
              <button type="button" class="lang-tab" data-lang="fa">FA</button>
              <button type="button" class="lang-tab" data-lang="tr">TR</button>
              <button type="button" class="lang-tab" data-lang="az">AZ</button>
              <button type="button" class="lang-tab" data-lang="ar">AR</button>
              <button type="button" class="lang-tab" data-lang="zh">ZH</button>
              <button type="button" class="lang-tab" data-lang="es">ES</button>
            </div>
            <button type="button" class="btn btn-sm btn-secondary" onclick="autoTranslateContent()">Auto-Translate</button>
          </div>
          <div id="content-lang-contents">
            <!-- Language content fields will be generated -->
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('content-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="saveContent()">Save</button>
      </div>
    </div>
  </div>

  <!-- Partner Modal -->
  <div class="modal" id="partner-modal">
    <div class="modal-content" style="max-width: 700px;">
      <div class="modal-header">
        <h3 id="partner-modal-title">Add Partner</h3>
        <button class="modal-close" onclick="closeModal('partner-modal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="partner-form">
          <input type="hidden" id="partner-id">
          <div class="d-flex gap-2">
            <div class="form-group" style="flex: 1;">
              <label>Partner Type</label>
              <select id="partner-type" class="form-control">
                <option value="organization">Organization</option>
                <option value="individual">Individual</option>
              </select>
            </div>
            <div class="form-group" style="flex: 1;">
              <label>Display Order</label>
              <input type="number" id="partner-order" class="form-control" value="0">
            </div>
          </div>
          <div class="form-group">
            <label>Image</label>
            <div class="image-preview empty" id="partner-preview"></div>
            <input type="file" id="partner-image" class="form-control" accept="image/*" onchange="previewImage(this, 'partner-preview')">
          </div>
          <div class="form-group">
            <label>Website URL</label>
            <input type="url" id="partner-website" class="form-control" placeholder="https://...">
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" id="partner-active" checked> Active
            </label>
          </div>
          <div class="d-flex justify-between align-center mb-2">
            <div class="lang-tabs" id="partner-lang-tabs">
              <button type="button" class="lang-tab active" data-lang="en">EN</button>
              <button type="button" class="lang-tab" data-lang="fa">FA</button>
              <button type="button" class="lang-tab" data-lang="tr">TR</button>
              <button type="button" class="lang-tab" data-lang="az">AZ</button>
              <button type="button" class="lang-tab" data-lang="ar">AR</button>
              <button type="button" class="lang-tab" data-lang="zh">ZH</button>
              <button type="button" class="lang-tab" data-lang="es">ES</button>
            </div>
            <button type="button" class="btn btn-sm btn-secondary" onclick="autoTranslatePartner()">Auto-Translate</button>
          </div>
          <div id="partner-lang-contents">
            <!-- Language content fields will be generated -->
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal('partner-modal')">Cancel</button>
        <button class="btn btn-primary" onclick="savePartner()">Save</button>
      </div>
    </div>
  </div>

  <script>
    // Global state
    let currentPage = 'dashboard';
    const languages = ['en', 'fa', 'tr', 'az', 'ar', 'zh', 'es'];
    const langNames = { en: 'English', fa: 'ŸÅÿßÿ±ÿ≥€å', tr: 'T√ºrk√ße', az: 'Az…ôrbaycan', ar: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', zh: '‰∏≠Êñá', es: 'Espa√±ol' };

    // Check auth on load
    document.addEventListener('DOMContentLoaded', async () => {
      const res = await fetch('/api/auth/status', { credentials: 'include' });
      const data = await res.json();
      if (data.isAuthenticated) {
        showAdmin();
      }
    });

    // Login form
    document.getElementById('login-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      try {
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password }),
          credentials: 'include'
        });
        const data = await res.json();
        
        if (data.success) {
          showAdmin();
        } else {
          showAlert('login-alert', data.message || 'Login failed', 'danger');
        }
      } catch (err) {
        showAlert('login-alert', 'Connection error', 'danger');
      }
    });

    // Logout
    document.getElementById('logout-btn').addEventListener('click', async () => {
      await fetch('/api/logout', { method: 'POST', credentials: 'include' });
      document.getElementById('login-screen').style.display = 'flex';
      document.getElementById('admin-panel').classList.remove('active');
    });

    // Show admin panel
    function showAdmin() {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('admin-panel').classList.add('active');
      loadDashboard();
    }

    // Navigation
    document.querySelectorAll('.nav-item[data-page]').forEach(btn => {
      btn.addEventListener('click', () => {
        const page = btn.dataset.page;
        showPage(page);
      });
    });

    function showPage(page) {
      currentPage = page;
      
      // Update nav
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      document.querySelector(`.nav-item[data-page="${page}"]`)?.classList.add('active');
      
      // Update pages
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(`page-${page}`)?.classList.add('active');
      
      // Load page data
      switch(page) {
        case 'dashboard': loadDashboard(); break;
        case 'hero': loadHeroImages(); break;
        case 'content': loadContent(); break;
        case 'partners': loadPartners(); break;
        case 'settings': loadSettings(); break;
        case 'navigation': loadNavigation(); break;
        case 'files': loadFiles(); break;
        case 'memberships': loadMemberships(); break;
      }
    }

    // Dashboard
    async function loadDashboard() {
      try {
        const res = await fetch('/api/admin/stats', { credentials: 'include' });
        const stats = await res.json();
        
        document.getElementById('stats-grid').innerHTML = `
          <div class="stat-card">
            <div class="stat-icon primary"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/></svg></div>
            <div class="stat-info"><h4>${stats.partners || 0}</h4><p>Total Partners</p></div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg></div>
            <div class="stat-info"><h4>${stats.heroImages || 0}</h4><p>Hero Images</p></div>
          </div>
          <div class="stat-card">
            <div class="stat-icon warning"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><line x1="20" y1="8" x2="20" y2="14"/><line x1="23" y1="11" x2="17" y2="11"/></svg></div>
            <div class="stat-info"><h4>${stats.pendingMemberships || 0}</h4><p>Pending Applications</p></div>
          </div>
          <div class="stat-card">
            <div class="stat-icon info"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/></svg></div>
            <div class="stat-info"><h4>${stats.contentSections || 0}</h4><p>Content Sections</p></div>
          </div>
        `;
      } catch (err) {
        console.error('Failed to load stats:', err);
      }
    }

    // Hero Images
    async function loadHeroImages() {
      try {
        const res = await fetch('/api/admin/hero-images', { credentials: 'include' });
        const images = await res.json();
        
        document.getElementById('hero-grid').innerHTML = images.length ? images.map(img => `
          <div class="hero-card">
            <span class="order-badge">#${img.display_order}</span>
            <span class="status-badge ${img.is_active ? 'active' : 'inactive'}">${img.is_active ? 'Active' : 'Inactive'}</span>
            <img src="${img.image_url}" alt="Hero ${img.id}">
            <div class="hero-card-body">
              <p style="font-size: 0.875rem; color: var(--gray-600); margin: 0;">${img.title_en || 'No title'}</p>
              <div class="hero-card-actions">
                <button class="btn btn-sm btn-secondary" onclick="editHero(${img.id})">Edit</button>
                <button class="btn btn-sm btn-danger" onclick="deleteHero(${img.id})">Delete</button>
              </div>
            </div>
          </div>
        `).join('') : '<p style="color: var(--gray-500);">No hero images yet. Add one to get started.</p>';
      } catch (err) {
        console.error('Failed to load hero images:', err);
      }
    }

    function openHeroModal(hero = null) {
      document.getElementById('hero-modal-title').textContent = hero ? 'Edit Hero Image' : 'Add Hero Image';
      document.getElementById('hero-id').value = hero?.id || '';
      document.getElementById('hero-image-url').value = hero?.image_url || '';
      document.getElementById('hero-order').value = hero?.display_order || 0;
      document.getElementById('hero-active').checked = hero?.is_active !== 0;
      
      // Generate language fields
      document.getElementById('hero-lang-contents').innerHTML = languages.map(lang => `
        <div class="lang-content ${lang === 'en' ? 'active' : ''}" data-lang="${lang}">
          <div class="form-group">
            <label>Title (${langNames[lang]})</label>
            <input type="text" id="hero-title-${lang}" class="form-control" value="${hero?.[`title_${lang}`] || ''}">
          </div>
          <div class="form-group">
            <label>Subtitle (${langNames[lang]})</label>
            <input type="text" id="hero-subtitle-${lang}" class="form-control" value="${hero?.[`subtitle_${lang}`] || ''}">
          </div>
        </div>
      `).join('');
      
      // Preview
      const preview = document.getElementById('hero-preview');
      if (hero?.image_url) {
        preview.innerHTML = `<img src="${hero.image_url}">`;
        preview.classList.remove('empty');
      } else {
        preview.innerHTML = '';
        preview.classList.add('empty');
      }
      
      setupLangTabs('hero');
      document.getElementById('hero-modal').classList.add('active');
    }

    async function editHero(id) {
      const res = await fetch('/api/admin/hero-images', { credentials: 'include' });
      const images = await res.json();
      const hero = images.find(h => h.id === id);
      if (hero) openHeroModal(hero);
    }

    async function saveHero() {
      const id = document.getElementById('hero-id').value;
      const formData = new FormData();
      
      const imageFile = document.getElementById('hero-image').files[0];
      if (imageFile) {
        formData.append('image', imageFile);
      } else {
        formData.append('image_url', document.getElementById('hero-image-url').value);
      }
      
      formData.append('display_order', document.getElementById('hero-order').value);
      formData.append('is_active', document.getElementById('hero-active').checked);
      
      languages.forEach(lang => {
        formData.append(`title_${lang}`, document.getElementById(`hero-title-${lang}`).value);
        formData.append(`subtitle_${lang}`, document.getElementById(`hero-subtitle-${lang}`).value);
      });
      
      const url = id ? `/api/admin/hero-images/${id}` : '/api/admin/hero-images';
      const method = id ? 'PUT' : 'POST';
      
      await fetch(url, { method, body: formData });
      closeModal('hero-modal');
      loadHeroImages();
    }

    async function deleteHero(id) {
      if (confirm('Are you sure you want to delete this hero image?')) {
        await fetch(`/api/admin/hero-images/${id}`, { method: 'DELETE', credentials: 'include' });
        loadHeroImages();
      }
    }

    // Page Content
    async function loadContent() {
      try {
        const res = await fetch('/api/admin/content', { credentials: 'include' });
        const content = await res.json();
        
        document.getElementById('content-list').innerHTML = content.length ? content.map(item => `
          <div class="content-item">
            <div class="content-item-header">
              <span class="content-item-key">${item.section_key}</span>
              <div class="d-flex gap-1">
                <button class="btn btn-sm btn-secondary" onclick="editContent('${item.section_key}')">Edit</button>
                <button class="btn btn-sm btn-secondary" onclick="translateContent('${item.section_key}')">Translate</button>
              </div>
            </div>
            <p style="margin: 0; color: var(--gray-600); font-size: 0.9rem;">${(item.content_en || '').substring(0, 150)}${(item.content_en || '').length > 150 ? '...' : ''}</p>
          </div>
        `).join('') : '<p style="color: var(--gray-500);">No content sections yet.</p>';
      } catch (err) {
        console.error('Failed to load content:', err);
      }
    }

    function openContentModal(content = null) {
      document.getElementById('content-modal-title').textContent = content ? 'Edit Content' : 'Add Content Section';
      document.getElementById('content-key').value = content?.section_key || '';
      document.getElementById('content-key').disabled = !!content;
      document.getElementById('content-type').value = content?.content_type || 'text';
      
      document.getElementById('content-lang-contents').innerHTML = languages.map(lang => `
        <div class="lang-content ${lang === 'en' ? 'active' : ''}" data-lang="${lang}">
          <div class="form-group mb-0">
            <textarea id="content-value-${lang}" class="form-control" rows="4" placeholder="Content in ${langNames[lang]}">${content?.[`content_${lang}`] || ''}</textarea>
          </div>
        </div>
      `).join('');
      
      setupLangTabs('content');
      document.getElementById('content-modal').classList.add('active');
    }

    async function editContent(key) {
      const res = await fetch('/api/admin/content', { credentials: 'include' });
      const content = await res.json();
      const item = content.find(c => c.section_key === key);
      if (item) openContentModal(item);
    }

    async function saveContent() {
      const key = document.getElementById('content-key').value;
      const data = {
        section_key: key,
        content_type: document.getElementById('content-type').value
      };
      
      languages.forEach(lang => {
        data[`content_${lang}`] = document.getElementById(`content-value-${lang}`).value;
      });
      
      const existing = document.getElementById('content-key').disabled;
      const url = existing ? `/api/admin/content/${key}` : '/api/admin/content';
      const method = existing ? 'PUT' : 'POST';
      
      await fetch(url, {
        method,
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      
      closeModal('content-modal');
      loadContent();
    }

    async function translateContent(key) {
      if (confirm('Auto-translate English content to all other languages?')) {
        await fetch(`/api/admin/content/${key}/translate`, { method: 'POST', credentials: 'include' });
        loadContent();
      }
    }

    async function autoTranslateContent() {
      const enContent = document.getElementById('content-value-en').value;
      if (!enContent) {
        alert('Please enter English content first');
        return;
      }
      
      // This would call the translate API for each language
      alert('Auto-translation will be applied when you save.');
    }

    // Partners
    async function loadPartners() {
      try {
        const res = await fetch('/api/admin/partners', { credentials: 'include' });
        const partners = await res.json();
        
        document.getElementById('partners-table').innerHTML = partners.length ? partners.map(p => `
          <tr>
            <td><img src="${p.image_url || 'https://via.placeholder.com/50'}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;"></td>
            <td>${p.name_en || 'Unnamed'}</td>
            <td><span class="badge badge-info">${p.partner_type}</span></td>
            <td><span class="badge ${p.is_active ? 'badge-success' : 'badge-warning'}">${p.is_active ? 'Active' : 'Inactive'}</span></td>
            <td>${p.display_order}</td>
            <td>
              <button class="btn btn-sm btn-secondary" onclick="editPartner(${p.id})">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deletePartner(${p.id})">Delete</button>
            </td>
          </tr>
        `).join('') : '<tr><td colspan="6" style="text-align: center; color: var(--gray-500);">No partners yet.</td></tr>';
      } catch (err) {
        console.error('Failed to load partners:', err);
      }
    }

    function openPartnerModal(partner = null) {
      document.getElementById('partner-modal-title').textContent = partner ? 'Edit Partner' : 'Add Partner';
      document.getElementById('partner-id').value = partner?.id || '';
      document.getElementById('partner-type').value = partner?.partner_type || 'organization';
      document.getElementById('partner-order').value = partner?.display_order || 0;
      document.getElementById('partner-website').value = partner?.website_url || '';
      document.getElementById('partner-active').checked = partner?.is_active !== 0;
      
      document.getElementById('partner-lang-contents').innerHTML = languages.map(lang => `
        <div class="lang-content ${lang === 'en' ? 'active' : ''}" data-lang="${lang}">
          <div class="form-group">
            <label>Name (${langNames[lang]})</label>
            <input type="text" id="partner-name-${lang}" class="form-control" value="${partner?.[`name_${lang}`] || ''}">
          </div>
          <div class="form-group mb-0">
            <label>Description (${langNames[lang]})</label>
            <textarea id="partner-desc-${lang}" class="form-control" rows="3">${partner?.[`description_${lang}`] || ''}</textarea>
          </div>
        </div>
      `).join('');
      
      const preview = document.getElementById('partner-preview');
      if (partner?.image_url) {
        preview.innerHTML = `<img src="${partner.image_url}">`;
        preview.classList.remove('empty');
      } else {
        preview.innerHTML = '';
        preview.classList.add('empty');
      }
      
      setupLangTabs('partner');
      document.getElementById('partner-modal').classList.add('active');
    }

    async function editPartner(id) {
      const res = await fetch('/api/admin/partners', { credentials: 'include' });
      const partners = await res.json();
      const partner = partners.find(p => p.id === id);
      if (partner) openPartnerModal(partner);
    }

    async function savePartner() {
      const id = document.getElementById('partner-id').value;
      const formData = new FormData();
      
      const imageFile = document.getElementById('partner-image').files[0];
      if (imageFile) formData.append('image', imageFile);
      
      formData.append('partner_type', document.getElementById('partner-type').value);
      formData.append('display_order', document.getElementById('partner-order').value);
      formData.append('website_url', document.getElementById('partner-website').value);
      formData.append('is_active', document.getElementById('partner-active').checked);
      
      languages.forEach(lang => {
        formData.append(`name_${lang}`, document.getElementById(`partner-name-${lang}`).value);
        formData.append(`description_${lang}`, document.getElementById(`partner-desc-${lang}`).value);
      });
      
      const url = id ? `/api/admin/partners/${id}` : '/api/admin/partners';
      const method = id ? 'PUT' : 'POST';
      
      await fetch(url, { method, body: formData });
      closeModal('partner-modal');
      loadPartners();
    }

    async function deletePartner(id) {
      if (confirm('Are you sure you want to delete this partner?')) {
        await fetch(`/api/admin/partners/${id}`, { method: 'DELETE', credentials: 'include' });
        loadPartners();
      }
    }

    async function autoTranslatePartner() {
      const name = document.getElementById('partner-name-en').value;
      const desc = document.getElementById('partner-desc-en').value;
      
      if (!name) {
        alert('Please enter English name first');
        return;
      }
      
      try {
        const res = await fetch('/api/admin/translate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ name, description: desc }),
          credentials: 'include'
        });
        const data = await res.json();
        
        if (data.success) {
          Object.entries(data.translations).forEach(([key, value]) => {
            const [field, lang] = key.split('_');
            const inputId = field === 'name' ? `partner-name-${lang}` : `partner-desc-${lang}`;
            const input = document.getElementById(inputId);
            if (input) input.value = value;
          });
          
          // Flash language tabs
          document.querySelectorAll('#partner-lang-tabs .lang-tab').forEach(tab => {
            if (tab.dataset.lang !== 'en') {
              tab.style.animation = 'flash 0.5s ease 3';
            }
          });
        }
      } catch (err) {
        console.error('Translation failed:', err);
      }
    }

    // Settings
    async function loadSettings() {
      try {
        const res = await fetch('/api/admin/settings', { credentials: 'include' });
        const settings = await res.json();
        
        const settingsConfig = [
          { key: 'site_name', label: 'Site Name', type: 'text' },
          { key: 'site_tagline', label: 'Tagline', type: 'text' },
          { key: 'primary_color', label: 'Primary Color', type: 'color' },
          { key: 'secondary_color', label: 'Secondary Color', type: 'color' },
          { key: 'hero_height', label: 'Hero Height (CSS)', type: 'text' },
          { key: 'carousel_interval', label: 'Carousel Interval (ms)', type: 'number' },
          { key: 'contact_email', label: 'Contact Email', type: 'email' },
          { key: 'meta_description', label: 'Meta Description', type: 'textarea' }
        ];
        
        document.getElementById('settings-form').innerHTML = settingsConfig.map(s => {
          const value = settings.find(set => set.setting_key === s.key)?.setting_value || '';
          if (s.type === 'color') {
            return `
              <div class="form-group">
                <label>${s.label}</label>
                <div class="color-input-group">
                  <input type="color" id="setting-${s.key}" value="${value}">
                  <input type="text" class="form-control" value="${value}" onchange="document.getElementById('setting-${s.key}').value = this.value">
                </div>
              </div>
            `;
          } else if (s.type === 'textarea') {
            return `
              <div class="form-group">
                <label>${s.label}</label>
                <textarea id="setting-${s.key}" class="form-control" rows="3">${value}</textarea>
              </div>
            `;
          } else {
            return `
              <div class="form-group">
                <label>${s.label}</label>
                <input type="${s.type}" id="setting-${s.key}" class="form-control" value="${value}">
              </div>
            `;
          }
        }).join('');
      } catch (err) {
        console.error('Failed to load settings:', err);
      }
    }

    async function saveSettings() {
      const settings = {};
      document.querySelectorAll('[id^="setting-"]').forEach(input => {
        const key = input.id.replace('setting-', '');
        settings[key] = input.value;
      });
      
      await fetch('/api/admin/settings', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ settings }),
        credentials: 'include'
      });
      
      alert('Settings saved successfully!');
    }

    // Navigation
    async function loadNavigation() {
      try {
        const res = await fetch('/api/admin/navigation', { credentials: 'include' });
        const nav = await res.json();
        
        document.getElementById('navigation-table').innerHTML = nav.length ? nav.map(n => `
          <tr>
            <td>${n.label_en}</td>
            <td><code>${n.href}</code></td>
            <td>${n.display_order}</td>
            <td><span class="badge ${n.is_active ? 'badge-success' : 'badge-warning'}">${n.is_active ? 'Active' : 'Inactive'}</span></td>
            <td>
              <button class="btn btn-sm btn-secondary" onclick="editNav(${n.id})">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteNav(${n.id})">Delete</button>
            </td>
          </tr>
        `).join('') : '<tr><td colspan="5" style="text-align: center;">No navigation items.</td></tr>';
      } catch (err) {
        console.error('Failed to load navigation:', err);
      }
    }

    // Files
    async function loadFiles() {
      try {
        const res = await fetch('/api/admin/files', { credentials: 'include' });
        const files = await res.json();
        
        document.getElementById('files-grid').innerHTML = files.length ? files.map(f => `
          <div class="hero-card">
            <img src="${f.url}" alt="${f.name}" onerror="this.src='https://via.placeholder.com/250x150?text=File'">
            <div class="hero-card-body">
              <p style="font-size: 0.75rem; word-break: break-all; margin-bottom: 0.5rem;">${f.name}</p>
              <div class="hero-card-actions">
                <button class="btn btn-sm btn-secondary" onclick="copyToClipboard('${f.url}')">Copy URL</button>
                <button class="btn btn-sm btn-danger" onclick="deleteFile('${f.name}')">Delete</button>
              </div>
            </div>
          </div>
        `).join('') : '<p style="color: var(--gray-500);">No files uploaded yet.</p>';
      } catch (err) {
        console.error('Failed to load files:', err);
      }
    }

    async function uploadFile(input) {
      if (!input.files[0]) return;
      
      const formData = new FormData();
      formData.append('file', input.files[0]);
      
      await fetch('/api/admin/upload', { method: 'POST', body: formData, credentials: 'include' });
      input.value = '';
      loadFiles();
    }

    async function deleteFile(filename) {
      if (confirm('Delete this file?')) {
        await fetch(`/api/admin/files/${filename}`, { method: 'DELETE', credentials: 'include' });
        loadFiles();
      }
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text);
      alert('URL copied to clipboard!');
    }

    // Memberships
    async function loadMemberships(status = 'all') {
      try {
        const url = status === 'all' ? '/api/admin/memberships' : `/api/admin/memberships?status=${status}`;
        const res = await fetch(url);
        const data = await res.json();
        
        document.getElementById('memberships-table').innerHTML = data.memberships?.length ? data.memberships.map(m => `
          <tr>
            <td>${m.full_name}</td>
            <td>${m.email}</td>
            <td>${m.membership_type}</td>
            <td><span class="badge badge-${m.status === 'approved' ? 'success' : m.status === 'rejected' ? 'danger' : 'warning'}">${m.status}</span></td>
            <td>${new Date(m.created_at).toLocaleDateString()}</td>
            <td>
              <button class="btn btn-sm btn-success" onclick="updateMembership(${m.id}, 'approved')">Approve</button>
              <button class="btn btn-sm btn-danger" onclick="updateMembership(${m.id}, 'rejected')">Reject</button>
            </td>
          </tr>
        `).join('') : '<tr><td colspan="6" style="text-align: center;">No applications found.</td></tr>';
      } catch (err) {
        console.error('Failed to load memberships:', err);
      }
    }

    async function updateMembership(id, status) {
      await fetch(`/api/admin/memberships/${id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ status }),
        credentials: 'include'
      });
      loadMemberships();
    }

    // Membership tabs
    document.querySelectorAll('#page-memberships .tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('#page-memberships .tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadMemberships(btn.dataset.status);
      });
    });

    // Utility functions
    function closeModal(id) {
      document.getElementById(id).classList.remove('active');
    }

    function showAlert(containerId, message, type) {
      document.getElementById(containerId).innerHTML = `<div class="alert alert-${type}">${message}</div>`;
    }

    function previewImage(input, previewId) {
      const preview = document.getElementById(previewId);
      if (input.files && input.files[0]) {
        const reader = new FileReader();
        reader.onload = (e) => {
          preview.innerHTML = `<img src="${e.target.result}">`;
          preview.classList.remove('empty');
        };
        reader.readAsDataURL(input.files[0]);
      }
    }

    function setupLangTabs(prefix) {
      const tabs = document.querySelectorAll(`#${prefix}-lang-tabs .lang-tab`);
      const contents = document.querySelectorAll(`#${prefix}-lang-contents .lang-content`);
      
      tabs.forEach(tab => {
        tab.addEventListener('click', (e) => {
          e.preventDefault();
          const lang = tab.dataset.lang;
          
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          contents.forEach(c => {
            c.classList.toggle('active', c.dataset.lang === lang);
          });
        });
      });
    }

    // Add flash animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes flash {
        0%, 100% { background: var(--gray-100); }
        50% { background: var(--success); color: white; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>